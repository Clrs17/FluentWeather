<Page
    x:Class="FluentWeather.Uwp.Pages.DailyViewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="using:FluentWeather.Uwp.Behaviors"
    xmlns:controls="using:FluentWeather.Uwp.Controls"
    xmlns:controls1="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:FluentWeather.Uwp.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:FluentWeather.Abstraction.Models"
    mc:Ignorable="d">

    <Grid
        MaxWidth="1000"
        MaxHeight="1200"
        x:DefaultBindMode="OneWay"
        Padding="32,120,32,64">
        <Pivot
            x:Name="MainPivot"
            x:FieldModifier="Public"
            IsHeaderItemsCarouselEnabled="False"
            ItemsSource="{x:Bind DailyForecasts}"
            SelectedItem="{x:Bind SelectedItem, Mode=TwoWay}">
            <Pivot.HeaderTemplate>
                <DataTemplate x:DataType="models:WeatherBase">
                    <StackPanel>
                        <TextBlock Text="{Binding Time, Converter={StaticResource DateConverter}}" />
                        <TextBlock FontSize="14">
                            <Run Text="{x:Bind Description}" />
                            <Run Text="{Binding MinTemperature}" /><Run Text="° /" />
                            <Run Text="{Binding MaxTemperature}" /><Run Text="°" />
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </Pivot.HeaderTemplate>
            <Pivot.ItemTemplate>
                <DataTemplate x:DataType="models:WeatherBase">
                    <Grid Grid.Row="2" Margin="4,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <controls:HourlyTemperatureChart
                            Grid.Row="0"
                            Height="256"
                            Margin="0,64,0,0"
                            WeatherForecasts="{Binding HourlyForecasts}" />
                        <Grid Grid.Row="1" Margin="0,16,0,0">
                            <controls1:AdaptiveGridView
                                x:Name="HourlyGridView"
                                Margin="0,16,0,0"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Stretch"
                                DesiredWidth="100"
                                IsItemClickEnabled="True"
                                ItemHeight="140"
                                ItemTemplate="{StaticResource WeatherHourlyForecastTemplate}"
                                ItemsSource="{Binding HourlyForecasts}"
                                OneRowModeEnabled="True"
                                SelectionMode="None">
                                <i:Interaction.Behaviors>
                                    <behaviors:ListViewScrollBehavior />
                                    <behaviors:ListViewOpenFlyoutBehavior />
                                </i:Interaction.Behaviors>
                            </controls1:AdaptiveGridView>
                            <Button
                                Width="40"
                                Height="40"
                                Margin="-16,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                HorizontalContentAlignment="Stretch"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                CornerRadius="50">
                                <FontIcon Margin="-3,0,0,0" Glyph="&#xE00E;" />
                                <i:Interaction.Behaviors>
                                    <behaviors:ListViewScrollButtonBehavior IsRight="False" ListView="{Binding ElementName=HourlyGridView}" />
                                </i:Interaction.Behaviors>
                                <Button.Resources>
                                    <ResourceDictionary>
                                        <SolidColorBrush x:Key="ButtonBackgroundDisabled" Color="#0000" />
                                        <SolidColorBrush x:Key="ButtonBorderBrushDisabled" Color="#0000" />
                                    </ResourceDictionary>
                                </Button.Resources>
                            </Button>
                            <Button
                                Width="40"
                                Height="40"
                                Margin="0,0,-16,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                BorderBrush="Transparent"
                                CornerRadius="50">
                                <FontIcon Margin="-1,0,0,0" Glyph="&#xE00F;" />
                                <i:Interaction.Behaviors>
                                    <behaviors:ListViewScrollButtonBehavior ListView="{Binding ElementName=HourlyGridView}" />
                                </i:Interaction.Behaviors>
                                <Button.Resources>
                                    <ResourceDictionary>
                                        <SolidColorBrush x:Key="ButtonBackgroundDisabled" Color="#0000" />
                                        <SolidColorBrush x:Key="ButtonBorderBrushDisabled" Color="#0000" />
                                    </ResourceDictionary>
                                </Button.Resources>
                            </Button>

                        </Grid>

                        <TextBlock
                            Grid.Row="2"
                            Margin="12,0,0,0"
                            FontSize="16"
                            Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                            <Run
                                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                FontSize="14"
                                Text="&#xE018; " /><Run Text="日出" />
                            <Run Text="{Binding SunRise, Mode=OneWay}" />
                            <Run
                                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                FontSize="14"
                                Text="  &#xE099; " /><Run Text="日落" />
                            <Run Text="{Binding SunSet, Mode=OneWay}" />
                        </TextBlock>
                        <controls1:AdaptiveGridView
                            Grid.Row="3"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch"
                            DesiredWidth="200"
                            IsItemClickEnabled="True"
                            ItemHeight="90"
                            SelectionMode="None">
                            <controls1:AdaptiveGridView.Items>
                                <StackPanel x:Name="WindInfoPanel" Margin="12">
                                    <TextBlock
                                        FontSize="18"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                        Text="风" />
                                    <TextBlock FontSize="25">
                                        <Run Text="{Binding WindDirection}" />
                                        <Run FontSize="25" Text="{Binding WindScale}" />
                                        <Run FontSize="16" Text="级" />
                                    </TextBlock>
                                    <FlyoutBase.AttachedFlyout>
                                        <Flyout>
                                            <StackPanel MaxWidth="256">
                                                <TextBlock FontSize="18" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="{Binding WindDirection}" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding WindScale}" />
                                                    <Run FontSize="14" Text="级" />
                                                </TextBlock>
                                                <TextBlock FontSize="14" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="{Binding WindSpeed}" />
                                                    <Run Text="km/h" />
                                                </TextBlock>
                                                <TextBlock
                                                    FontSize="16"
                                                    IsTextSelectionEnabled="True"
                                                    Text="{Binding WindScale, Converter={StaticResource WindScaleToDescriptionConverter}}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </Flyout>
                                    </FlyoutBase.AttachedFlyout>
                                </StackPanel>
                                <StackPanel Margin="12">
                                    <TextBlock
                                        FontSize="18"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                        Text="湿度" />
                                    <TextBlock FontSize="25">
                                        <Run FontSize="25" Text="{Binding Humidity}" />
                                        <Run FontSize="16" Text="%" />
                                    </TextBlock>
                                    <FlyoutBase.AttachedFlyout>
                                        <Flyout>
                                            <StackPanel MaxWidth="256">
                                                <TextBlock FontSize="18" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="湿度 -" />
                                                    <Run Text="{Binding Humidity}" />
                                                    <Run FontSize="14" Text="%" />
                                                </TextBlock>
                                                <TextBlock
                                                    FontSize="16"
                                                    IsTextSelectionEnabled="True"
                                                    TextWrapping="Wrap">
                                                    相对于空气在当前温度下所能包含的最大水分量,空气中存在的水分量
                                                </TextBlock>
                                                <TextBlock
                                                    Margin="0,8,0,0"
                                                    FontSize="18"
                                                    Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="露点温度 -" />
                                                    <Run Text="{Binding DewPointTemperature}" /><Run Text="°" />
                                                </TextBlock>
                                                <TextBlock
                                                    FontSize="16"
                                                    IsTextSelectionEnabled="True"
                                                    TextWrapping="Wrap">
                                                    使空气中水分凝结成液态水(例如露水)所需要降至的温度。露点温度越高,感觉越“闷热”
                                                </TextBlock>
                                            </StackPanel>
                                        </Flyout>
                                    </FlyoutBase.AttachedFlyout>
                                </StackPanel>

                                <StackPanel Margin="12">
                                    <TextBlock
                                        FontSize="18"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                        Text="气压" />
                                    <TextBlock FontSize="25">
                                        <Run FontSize="25" Text="{Binding Pressure}" />
                                        <Run FontSize="16" Text="hPa" />
                                    </TextBlock>
                                    <FlyoutBase.AttachedFlyout>
                                        <Flyout>
                                            <StackPanel MaxWidth="256">
                                                <TextBlock FontSize="18" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="气压" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding Pressure}" />
                                                    <Run FontSize="14" Text="hPa" />
                                                </TextBlock>
                                                <TextBlock
                                                    FontSize="16"
                                                    IsTextSelectionEnabled="True"
                                                    TextWrapping="Wrap">
                                                    大气中空气的重量。较高的气压通常与晴朗的天气相关,较低的气压与暴风雨天气相关
                                                </TextBlock>
                                            </StackPanel>
                                        </Flyout>
                                    </FlyoutBase.AttachedFlyout>
                                </StackPanel>
                                <StackPanel Margin="12">
                                    <TextBlock
                                        FontSize="18"
                                        Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                        Text="能见度" />
                                    <TextBlock FontSize="25">
                                        <Run FontSize="25" Text="{Binding Visibility}" />
                                        <Run FontSize="16" Text="km" />
                                    </TextBlock>
                                    <FlyoutBase.AttachedFlyout>
                                        <Flyout>
                                            <StackPanel MaxWidth="256">
                                                <TextBlock FontSize="18" Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}">
                                                    <Run Text="能见度" />
                                                    <Run Text="-" />
                                                    <Run Text="{Binding Visibility}" />
                                                    <Run FontSize="14" Text="km" />
                                                </TextBlock>
                                                <TextBlock
                                                    FontSize="16"
                                                    IsTextSelectionEnabled="True"
                                                    TextWrapping="Wrap">
                                                    视力正常的人在当前天气条件下，能从天空背景中看到和辨认出目标物(黑色、大小适度)轮廓的最大水平距离
                                                </TextBlock>
                                            </StackPanel>
                                        </Flyout>
                                    </FlyoutBase.AttachedFlyout>
                                </StackPanel>
                            </controls1:AdaptiveGridView.Items>
                            <i:Interaction.Behaviors>
                                <behaviors:ListViewOpenFlyoutBehavior />
                            </i:Interaction.Behaviors>
                        </controls1:AdaptiveGridView>

                    </Grid>
                </DataTemplate>
            </Pivot.ItemTemplate>
            <Pivot.Resources>
                <StaticResource x:Key="PivotHeaderItemSelectedPipeFill" ResourceKey="SystemControlTransparentBrush" />
            </Pivot.Resources>
        </Pivot>

    </Grid>
</Page>
